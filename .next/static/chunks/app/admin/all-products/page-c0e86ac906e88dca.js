(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7805],{8574:(e,t,r)=>{"use strict";function a(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}r.d(t,{Ll:()=>s,Yv:()=>l,ZH:()=>a,ZV:()=>o});let s=async e=>{if("string"==typeof e&&e.startsWith("http"))try{let t=await fetch(e),r=await t.blob(),a=e.split("/").pop(),s=e.split(".").pop();return new File([r],a,{type:"application/".concat(s)})}catch(e){return console.error("Error fetching file from URL:",e),null}return e instanceof File||e instanceof Blob?e:null},l=e=>null==e?void 0:e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+|-+$/g,"");function o(e){return e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString()}},20900:(e,t,r)=>{"use strict";r.d(t,{Ot:()=>o,ZU:()=>n,lY:()=>c,vM:()=>i});var a=r(70404),s=r(76698),l=r(57383);let o=(0,a.xP)({reducerPath:"protectedProductSlice",baseQuery:(0,s.cw)({baseUrl:"https://api.embroidize.com/api/v1",prepareHeaders:e=>{let t=l.A.get("token");return t&&e.set("Authorization","Bearer ".concat(t)),e}}),endpoints:e=>({addProduct:e.mutation({query:e=>({url:"/product",method:"POST",body:e})}),updateProduct:e.mutation({query:e=>({url:"/product/".concat(e.get("id")),method:"PUT",body:e})}),deleteProduct:e.mutation({query:e=>({url:"/product/".concat(e),method:"DELETE"})})})}),{useAddProductMutation:n,useUpdateProductMutation:i,useDeleteProductMutation:c}=o},27975:(e,t,r)=>{"use strict";r.d(t,{AC:()=>p,E3:()=>h,HL:()=>n,Mi:()=>m,Sp:()=>o,nB:()=>d,pB:()=>i,vQ:()=>c,yG:()=>u});var a=r(70404),s=r(76698),l=r(57383);let o=(0,a.xP)({reducerPath:"categoryAndSubcategorySlice",baseQuery:(0,s.cw)({baseUrl:"https://api.embroidize.com/api/v1",prepareHeaders:e=>{let t=l.A.get("token");return t&&e.set("Authorization","Bearer ".concat(t)),e}}),endpoints:e=>({addProductCategory:e.mutation({query:e=>({url:"/product-category",method:"POST",body:e})}),updateProductCategory:e.mutation({query:e=>{let t=e.get("id");return{url:"/product-category/".concat(t),method:"PUT",body:e}}}),addProductSubCategory:e.mutation({query:e=>({url:"/product-subcategory",method:"POST",body:e})}),updateProductSubCategory:e.mutation({query:e=>{let t=e.get("id");return{url:"/product-subcategory/".concat(t),method:"PUT",body:e}}}),getPublicProductCategories:e.query({query:()=>({url:"/public/product-category",method:"GET"}),keepUnusedDataFor:86400,refetchOnMountOrArgChange:!1,refetchOnReconnect:!1}),getSinglePublicProductCategory:e.query({query:e=>({url:"/public/product-category/".concat(e),method:"GET"})}),getPublicProductSubCategories:e.query({query:()=>({url:"/public/product-subcategory",method:"GET"})}),getSinglePublicProductSubCategory:e.query({query:e=>({url:"/public/product-subcategory/".concat(e),method:"GET"})})})}),{useAddProductCategoryMutation:n,useUpdateProductCategoryMutation:i,useAddProductSubCategoryMutation:c,useUpdateProductSubCategoryMutation:d,useGetPublicProductCategoriesQuery:u,useGetSinglePublicProductCategoryQuery:h,useGetPublicProductSubCategoriesQuery:p,useGetSinglePublicProductSubCategoryQuery:m}=o},42746:(e,t,r)=>{"use strict";r.d(t,{default:()=>E});var a=r(95155),s=r(6874),l=r.n(s),o=r(35695),n=r(12115),i=r(60868),c=r(78904),d=r(90972),u=r(96424),h=r(3329),p=r(19652),m=r(64165),g=r(25556),x=r(50766),b=r(78355),f=r(64915),y=r(40477),v=r(84520),j=r(1493),C=r(98227),w=r(97376),S=r(72495),k=r(53454),P=r(27975),N=r(20900),A=r(8574);let T={control:e=>({...e,minHeight:"40px",borderRadius:"12px",borderColor:"#e5e7eb",fontSize:"0.875rem",boxShadow:"none","&:hover":{borderColor:"#d1d5db"}}),menu:e=>({...e,zIndex:50,fontSize:"0.875rem"})};function E(e){let{initialData:t=[],pagination:r,columns:s}=e,E=(0,o.useRouter)(),z=(0,o.useSearchParams)(),[B,L]=(0,n.useState)(new Set([])),[M,_]=(0,n.useState)(!1),[q,O]=(0,n.useState)(!1),[U,I]=(0,n.useState)(!1),[R,F]=(0,n.useState)(""),[W,D]=(0,n.useState)(null),[H,Q]=(0,n.useState)(""),[V,Y]=(0,n.useState)(""),[G,Z]=(0,n.useState)(""),[$,K]=(0,n.useState)(""),{data:J}=(0,P.yG)(),{data:X}=(0,P.AC)(),[ee]=(0,N.lY)(),[et,er]=(0,n.useState)(z.get("search")||"");(0,n.useEffect)(()=>{er(z.get("search")||"")},[z]);let ea=(0,n.useMemo)(()=>((null==J?void 0:J.data)||[]).map(e=>({label:e.name,value:e._id})),[J]),es=z.get("category"),el=z.get("sub_category"),eo=(0,n.useMemo)(()=>es?((null==X?void 0:X.data)||[]).filter(e=>{var t;return("object"==typeof e.category?null==(t=e.category)?void 0:t._id:e.category)===es}).map(e=>({label:e.name,value:e._id})):[],[X,es]),en=ea.find(e=>e.value===es)||null,ei=eo.find(e=>e.value===el)||null,ec=(0,n.useMemo)(()=>"all"===B?t.map(e=>e._id):Array.from(B),[B,t]),ed=(0,n.useCallback)(e=>{let t=new URLSearchParams(z.toString());Object.entries(e).forEach(e=>{let[r,a]=e;a?t.set(r,a):t.delete(r)}),"category"in e&&t.delete("sub_category"),t.set("page","1"),E.push("?".concat(t.toString()))},[z,E]),eu=(0,n.useCallback)(e=>{er(e),ed({search:e})},[ed]),eh=(0,n.useCallback)(()=>{er(""),ed({search:""})},[ed]),ep=(0,n.useCallback)(e=>{ed({category:(null==e?void 0:e.value)||""})},[ed]),em=(0,n.useCallback)(e=>{ed({sub_category:(null==e?void 0:e.value)||""})},[ed]),eg=(0,n.useCallback)(()=>{er(""),E.push("?page=1")},[E]),ex=(0,n.useCallback)(e=>{let t=new URLSearchParams(z.toString());t.set("page",e.toString()),E.push("?".concat(t.toString()))},[z,E]),eb=()=>{I(!1),F(""),D(null),Q(""),Y("")},ef=async()=>{if(!R.trim()||!V)return(0,S.Q)("Error","Required fields missing",3e3);_(!0);try{var e;let t=null==(e=document.cookie.split("; ").find(e=>e.startsWith("token=")))?void 0:e.split("=")[1],r=new FormData;r.append("name",R.trim()),r.append("productIds",JSON.stringify(ec)),r.append("slug",V),r.append("meta_title",G||""),r.append("meta_description",$||""),W&&r.append("image",W),(await fetch("".concat("https://api.embroidize.com/api/v1","/admin/bundle-product"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:r})).ok&&((0,k.r)("Success","Bundle created successfully",3e3),eb(),L(new Set([])),E.push("/admin/bundle-products"),E.refresh())}catch(e){(0,S.Q)("Error","Something went wrong",3e3)}finally{_(!1)}},ey=async e=>{if(0!==ec.length){O(!0);try{var t;let r=null==(t=document.cookie.split("; ").find(e=>e.startsWith("token=")))?void 0:t.split("=")[1];(await fetch("".concat("https://api.embroidize.com/api/v1","/admin/embroidize-choice/create"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({productIds:ec,status:e})})).ok&&((0,k.r)("Success","Admin Choice ".concat(e?"Added":"Removed"),3e3),(0,n.startTransition)(()=>{L(new Set([])),E.refresh()}))}catch(e){(0,S.Q)("Error","Update failed",3e3)}finally{O(!1)}}},ev=(0,n.useCallback)((e,t)=>{var r,s,l;let o=e[t];switch(t){case"name":return(0,a.jsx)(u.S,{avatarProps:{radius:"lg",src:null==e||null==(r=e.image)?void 0:r.url},name:o,children:e.name});case"isAdminChoice":return(0,a.jsx)("div",{className:"flex justify-center",children:e.isAdminChoice?(0,a.jsx)("i",{className:"ri-shield-star-fill text-2xl text-primary"}):(0,a.jsx)("span",{className:"text-gray-300",children:"-"})});case"category":return(0,a.jsx)("span",{children:(0,A.ZH)((null==e||null==(s=e.category)?void 0:s.name)||"-")});case"sub_category":return(0,a.jsx)("span",{children:(0,A.ZH)((null==e||null==(l=e.sub_category)?void 0:l.name)||"-")});case"actions":return(0,a.jsx)("div",{className:"flex justify-center items-center",children:(0,a.jsxs)(h.A,{children:[(0,a.jsx)(p.b,{children:(0,a.jsx)(m.T,{isIconOnly:!0,size:"sm",variant:"light",children:(0,a.jsx)(d.ME,{className:"text-default-300"})})}),(0,a.jsxs)(g.y,{children:[(0,a.jsx)(x.Y,{onPress:()=>E.push("/admin/add-products?productId=".concat(e._id)),children:"Edit"},"edit"),(0,a.jsx)(x.Y,{className:"text-danger",color:"danger",onPress:()=>ee(e._id),children:"Delete"},"delete")]})]})});default:return o}},[ee,E]),ej=(0,n.useMemo)(()=>(0,a.jsxs)("div",{className:"flex flex-col gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 items-end justify-start relative",children:[(0,a.jsx)(b.r,{isClearable:!0,className:"w-full sm:max-w-[30%]",placeholder:"Search name...",value:et,onValueChange:eu,onClear:eh}),(0,a.jsx)("div",{className:"w-full sm:max-w-[20%]",children:(0,a.jsx)(i.Ay,{instanceId:"category-select",placeholder:"Category",options:ea,value:en,onChange:ep,styles:T})}),(0,a.jsx)("div",{className:"w-full sm:max-w-[20%]",children:(0,a.jsx)(i.Ay,{instanceId:"sub-category-select",placeholder:"Sub-Category",isDisabled:!es||0===eo.length,options:eo,value:ei,onChange:em,styles:T,noOptionsMessage:()=>es?"No sub-categories found":"Select a category first"})}),(et||es||el)&&(0,a.jsx)("button",{className:"text-red-500 hover:text-red-700 font-bold ml-2 self-center",onClick:eg,title:"Clear all filters",children:"âœ•"})]}),ec.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-blue-700",children:[ec.length," item",ec.length>1?"s":""," ","selected"]}),(0,a.jsxs)("div",{className:"flex gap-2 ml-auto",children:[(0,a.jsx)(m.T,{size:"sm",color:"primary",onPress:()=>I(!0),children:"Create Bundle"}),(0,a.jsx)(m.T,{size:"sm",color:"primary",isLoading:q,onPress:()=>ey(!0),children:"Add Choice"}),(0,a.jsx)(m.T,{size:"sm",variant:"flat",color:"danger",isLoading:q,onPress:()=>ey(!1),children:"Remove Choice"})]})]})]}),[et,ea,eo,en,ei,es,el,ec.length,eu,eh,ep,em,eg,()=>{if(0===ec.length)return void(0,S.Q)("Error","Please select at least one product",3e3);I(!0)}]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h1",{className:"text-xl font-bold",children:["Total ",(null==r?void 0:r.total)||0," Products"]}),(0,a.jsx)(l(),{href:"/admin/add-products",prefetch:!1,children:(0,a.jsx)(m.T,{className:"bg-foreground text-background",endContent:(0,a.jsx)(d.c1,{}),size:"sm",children:"Add New"})})]}),(0,a.jsx)(c.A,{data:t,columns:s,pageSize:(null==r?void 0:r.limit)||10,renderCell:ev,onPageChange:ex,pagination:r,topContent:ej,selectedKeys:B,onSelectionChange:L}),(0,a.jsx)(f.Y,{isOpen:U,onClose:eb,size:"3xl",backdrop:"blur",scrollBehavior:"inside",children:(0,a.jsxs)(y.g,{children:[(0,a.jsx)(v.c,{children:"Create Bundle Design"}),(0,a.jsxs)(j.h,{className:"gap-4",children:[(0,a.jsx)(b.r,{label:"Bundle Name",value:R,onValueChange:e=>{F(e),Y((0,A.Yv)(e,{lower:!0,strict:!0}))},isRequired:!0,variant:"bordered"}),(0,a.jsx)(b.r,{label:"Bundle Slug",value:V,onValueChange:Y,isRequired:!0,variant:"bordered"}),(0,a.jsx)(b.r,{label:"Meta Title",value:G,onValueChange:Z,variant:"bordered"}),(0,a.jsx)(C.P,{label:"Meta Description",value:$,onValueChange:K,variant:"bordered",minRows:3}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("label",{className:"text-sm font-medium",children:["Bundle Image ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(r){if(!r.type.startsWith("image/"))return void(0,S.Q)("Error","Please select a valid image file",3e3);D(r);let e=new FileReader;e.onloadend=()=>{Q(e.result)},e.readAsDataURL(r)}},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),H&&(0,a.jsx)("img",{src:H,className:"w-32 h-32 object-cover rounded-lg border-2",alt:"preview"})]})]}),(0,a.jsxs)(w.q,{children:[(0,a.jsx)(m.T,{color:"danger",variant:"light",onPress:eb,children:"Cancel"}),(0,a.jsx)(m.T,{color:"primary",isLoading:M,onPress:ef,children:"Create Bundle"})]})]})})]})}},53454:(e,t,r)=>{"use strict";r.d(t,{r:()=>o});var a=r(95155),s=r(60418),l=r(29858);let o=(e,t,r)=>(0,s.$U)({title:"".concat(e,"!"),description:"".concat(t),timeout:"".concat(r),color:"success",position:"top-right",shouldShowTimeoutProgress:!0,classNames:{closeButton:"opacity-100 absolute right-4 top-1/2 -translate-y-1/2 ms-8",base:(0,l.cn)(["bg-default-50 dark:bg-background shadow-sm text-black flex"])},closeIcon:(0,a.jsxs)("svg",{fill:"none",height:"32",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",width:"32",children:[(0,a.jsx)("path",{d:"M18 6 6 18"}),(0,a.jsx)("path",{d:"m6 6 12 12"})]})})},72495:(e,t,r)=>{"use strict";r.d(t,{Q:()=>o});var a=r(95155),s=r(60418),l=r(29858);let o=(e,t,r)=>(0,s.$U)({title:"".concat(e,"!"),description:"".concat(t),timeout:"".concat(r||3e3),color:"danger",position:"top-right",shouldShowTimeoutProgress:!0,classNames:{closeButton:"opacity-100 absolute right-4 top-1/2 -translate-y-1/2 ms-8",base:(0,l.cn)(["bg-default-50 dark:bg-background shadow-sm text-black flex"])},closeIcon:(0,a.jsxs)("svg",{fill:"none",height:"32",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",width:"32",children:[(0,a.jsx)("path",{d:"M18 6 6 18"}),(0,a.jsx)("path",{d:"m6 6 12 12"})]})})},78904:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var a=r(95155),s=r(78355),l=r(17323),o=r(30086),n=r(53773),i=r(95604),c=r(58451),d=r(64177),u=r(33183),h=r(12115);let p=e=>{var t;let{data:r,columns:p,pageSize:m,renderCell:g,onSearchChange:x,pagination:b,onPageChange:f,topContent:y,...v}=e,j=(0,h.useMemo)(()=>Array.isArray(r)?r:[],[r]),C=(null==b?void 0:b.totalPages)||1,w=(null==b?void 0:b.currentPage)||1,S=(0,a.jsx)("div",{className:"flex flex-col gap-4",children:(0,a.jsxs)("div",{className:"flex  gap-3 items-center w-full",children:[(0,a.jsx)(s.r,{isClearable:!0,className:"w-full sm:max-w-[44%]",placeholder:"Search by name...",onValueChange:x,onClear:()=>x("")}),(null==(t=v.selectedIds)?void 0:t.length)>0&&(0,a.jsxs)("div",{className:"text-lg text-gray-600 whitespace-nowrap",children:[v.selectedIds.length," item",v.selectedIds.length>1?"s":""," selected"]})]})}),k=C>1&&(0,a.jsx)("div",{className:"py-2 px-2 flex justify-between items-center",children:(0,a.jsx)(l.T,{isCompact:!0,showControls:!0,showShadow:!0,color:"primary",page:w,total:C,onChange:f})});return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(o.j,{isHeaderSticky:!0,"aria-label":"Example table with custom cells, pagination, and sorting",bottomContent:k,topContent:y||S,selectedKeys:v.selectedKeys,selectionMode:"multiple",selectionBehavior:"check",onSelectionChange:v.onSelectionChange,children:[(0,a.jsx)(n.X,{columns:p,children:e=>(0,a.jsx)(i.e,{children:e.name},e.uid)}),(0,a.jsx)(c.E,{items:j,emptyContent:"No data found",children:e=>(0,a.jsx)(d.s,{children:t=>(0,a.jsx)(u.w,{className:"table-cell self-center",children:g(e,t)})},e._id)})]})})}},90972:(e,t,r)=>{"use strict";r.d(t,{ME:()=>l,WI:()=>o,c1:()=>s});var a=r(95155);let s=e=>{let{size:t=24,width:r,height:s,...l}=e;return(0,a.jsx)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:t||s,role:"presentation",viewBox:"0 0 24 24",width:t||r,...l,children:(0,a.jsxs)("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[(0,a.jsx)("path",{d:"M6 12h12"}),(0,a.jsx)("path",{d:"M12 18V6"})]})})},l=e=>{let{size:t=24,width:r,height:s,...l}=e;return(0,a.jsx)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:t||s,role:"presentation",viewBox:"0 0 24 24",width:t||r,...l,children:(0,a.jsx)("path",{d:"M12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 12c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z",fill:"currentColor"})})},o=e=>(0,a.jsxs)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:[(0,a.jsx)("path",{d:"M11.5 21C16.7467 21 21 16.7467 21 11.5C21 6.25329 16.7467 2 11.5 2C6.25329 2 2 6.25329 2 11.5C2 16.7467 6.25329 21 11.5 21Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M22 22L20 20",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})]})},97214:(e,t,r)=>{Promise.resolve().then(r.bind(r,42746))}},e=>{e.O(0,[9234,640,8355,8793,4710,6057,5014,6874,6501,418,7323,9858,8254,8703,6687,2990,9699,1310,868,1802,8441,5964,7358],()=>e(e.s=97214)),_N_E=e.O()}]);