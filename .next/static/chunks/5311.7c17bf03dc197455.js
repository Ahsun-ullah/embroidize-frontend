"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5311],{29879:(e,s,r)=>{r.r(s),r.d(s,{default:()=>t});var a=r(95155),l=r(9234);let t=()=>(0,a.jsx)(l.o,{color:"white",className:"bg-black p-3 rounded-full"})},35311:(e,s,r)=>{r.r(s),r.d(s,{default:()=>w});var a=r(95155),l=r(45845),t=r(91158),i=r(45014),o=r(3329),d=r(19652),n=r(20070),u=r(25556),c=r(50766),m=r(1567),x=r(20044),h=r(64165),f=r(57383),p=r(6874),b=r.n(p),j=r(35695),g=r(12115),v=r(34540),N=r(29879);function w(){var e,s;let r=!!f.A.get("token"),p=(0,v.wA)(),w=(0,j.useRouter)(),{data:y,isLoading:k,refetch:q}=(0,l.Hd)(void 0,{skip:!r});return((0,g.useEffect)(()=>{r&&q()},[r,q]),k)?(0,a.jsx)(t.t,{children:(0,a.jsx)(N.default,{})}):(null==y?void 0:y.role)==="admin"?(0,a.jsx)(b(),{href:"/admin",className:"button text-sm sm:text-sm md:text-lg xl:text-xl",children:"dashboard"}):(0,a.jsx)("div",{children:(0,a.jsx)(i.X,{children:r&&(null==y?void 0:y.email)?(0,a.jsxs)(o.A,{placement:"bottom-start",className:"text-black",children:[(0,a.jsx)(d.b,{children:(0,a.jsx)(n.Q,{isBordered:!0,as:"button",className:"transition-transform",color:"primary",name:null==y?void 0:y.name,size:"sm",src:null==y||null==(e=y.profile_image)?void 0:e.url,"aria-label":"User profile menu"})}),(0,a.jsxs)(u.y,{children:[(0,a.jsx)(c.Y,{isBordered:!0,className:"p-3 gap-2 border-dashed",children:(0,a.jsxs)("div",{className:"flex items-center gap-x-4 text-base",children:[(0,a.jsx)(n.Q,{isBordered:!0,as:"button",className:"transition-transform",color:"primary",name:null==y?void 0:y.name,size:"sm",src:null==y||null==(s=y.profile_image)?void 0:s.url,"aria-hidden":"true"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold",children:null==y?void 0:y.name}),(0,a.jsx)("p",{className:"font-medium",children:null==y?void 0:y.email})]})]})},"profile"),(0,a.jsx)(c.Y,{children:(0,a.jsxs)(b(),{href:"/user/user-details?tabName=account",prefetch:!1,className:"flex text-base gap-1 font-medium",children:[(0,a.jsx)("i",{className:"ri-account-circle-fill","aria-hidden":"true"}),"Account"]})}),(0,a.jsx)(c.Y,{children:(0,a.jsxs)(b(),{href:"/user/user-details?tabName=downloads",prefetch:!1,className:"flex text-base gap-1 font-medium",children:[(0,a.jsx)("i",{className:"ri-download-fill","aria-hidden":"true"}),"Downloads"]})}),(0,a.jsx)(c.Y,{children:(0,a.jsx)(m.y,{})}),(0,a.jsx)(c.Y,{isBordered:!0,className:"p-2",color:"danger",children:(0,a.jsx)("button",{onClick:()=>{f.A.remove("token"),p(l.Gq.util.resetApiState()),w.push("/")},type:"button",className:"font-semibold flex text-base gap-1 w-full","aria-label":"Log out",children:"Log Out"})},"logout")]})]}):(0,a.jsx)(t.t,{children:(0,a.jsx)(x.p,{children:(0,a.jsx)(h.T,{as:b(),color:"primary",href:"/auth/login",variant:"flat",size:"sm",radius:"full",className:"bg-black text-white hover:bg-slate-700 font-semibold px-0 lg:px-4  text-[0.5rem] lg:text-base","aria-label":"Sign in",children:"Sign In"})})})})})}},45845:(e,s,r)=>{r.d(s,{Gq:()=>i,Hd:()=>o,Lv:()=>m,jm:()=>n,nd:()=>c,xM:()=>d,zo:()=>u});var a=r(70404),l=r(76698),t=r(57383);let i=(0,a.xP)({reducerPath:"userInfoSlice",baseQuery:(0,l.cw)({baseUrl:"https://api.embroidize.com/api/v1",prepareHeaders:e=>{let s=t.A.get("token");return s&&e.set("Authorization","Bearer ".concat(s)),e}}),endpoints:e=>({userInfo:e.query({query:()=>({url:"/userinfo",method:"GET"})}),updateUserInfo:e.mutation({query:e=>({url:"/user/".concat(e.get("id")),method:"PUT",body:e})}),updatePassword:e.mutation({query:e=>({url:"/settings/password/",method:"PATCH",body:e})}),forgotPassword:e.mutation({query:e=>({url:"/public/forgot-password",method:"POST",body:e})}),resetPassword:e.mutation({query:e=>({url:"/public/reset-password",method:"POST",body:e})}),UserDownloadHistory:e.query({query:e=>({url:"/downloads/user/".concat(e),method:"GET"})})})}),{useUserInfoQuery:o,useUpdateUserInfoMutation:d,useUserDownloadHistoryQuery:n,useUpdatePasswordMutation:u,useForgotPasswordMutation:c,useResetPasswordMutation:m}=i}}]);